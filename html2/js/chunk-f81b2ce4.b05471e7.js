(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f81b2ce4"],{"0fea":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return d}));var r=a("b775"),n={rolePage:"/system/role/findPage",roleInfo:"/system/role/get",removeRole:"/system/role/delete",getPermissonData:"/system/moduleAction/getPermissonData",roleList:"/system/role/findList",saveRole:"/system/role/save"};function i(e){return Object(r["b"])({url:n.roleList,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(r["b"])({url:n.rolePage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(r["b"])({url:n.roleInfo,method:"post",data:e})}function l(e){return Object(r["b"])({url:n.removeRole,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.getPermissonData,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.saveRole,method:"post",data:e})}},"6a53":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"userCard"},[a("div",[a("div",{staticClass:"searchDiv"},[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.searchForm,"label-col":{span:8},"wrapper-col":{span:14}},on:{submit:e.handleSearch}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"用户名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],attrs:{placeholder:"请输入用户名称"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"用户角色"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleId"],expression:"['roleId']"}],attrs:{placeholder:"请选择用户角色"}},e._l(e.templateDatas,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("a-col",{style:{textAlign:"right"},attrs:{span:8}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 查询 ")]),a("a-button",{style:{marginLeft:"8px"},on:{click:e.handleReset}},[e._v(" 清空 ")])],1)],1)],1)],1),a("div",{staticClass:"addDiv"},[1===e.actionList.add?a("a-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addDrawerShow}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 增加 ")],1):e._e()],1)]),a("div",{staticClass:"tableDiv"},[a("S-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,pagination:e.pagination,loading:e.loading,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[1===e.actionList.update?a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v(" 修改 ")]):e._e(),1===e.actionList.update&&1===e.actionList.get||1!==e.actionList.get?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.actionList.get?a("a",{on:{click:function(t){return e.handleRead(r)}}},[e._v(" 查看 ")]):e._e(),1===e.actionList.get||1===e.actionList.delete?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.actionList.delete?a("a-popconfirm",{attrs:{title:"您确定要删除吗?",okText:"确定",cancelText:"取消"},on:{confirm:function(t){return e.confirm(r)},cancel:e.cancel}},[a("a",{attrs:{href:"#"}},[e._v(" 删除 ")])]):e._e()]}}])})],1),a("div",[a("a-drawer",{attrs:{width:700,title:e.title,visible:e.visible,confirmLoading:e.addLoading,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form,"label-col":{span:6},"wrapper-col":{span:16}},on:{submit:e.handleSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:"hidden"}})],1),a("a-form-item",{attrs:{label:"登录账号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"登录账号不能为空"}]}],expression:"['username', {\n              rules: [{ required: true, message: '登录账号不能为空' }]\n            }]"}],attrs:{placeholder:"请输入登录账号"}})],1),a("a-form-item",{attrs:{label:"登录密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"登录密码不能为空"}]}],expression:"['password', {\n              rules: [{ required: true, message: '登录密码不能为空' }]\n            }]"}],attrs:{placeholder:"请输入登录密码"}})],1),a("a-form-item",{attrs:{label:"用户名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请选择用户"}]}],expression:"['name', {\n              rules: [{ required: true, message: '请选择用户' }]\n            }]"}],attrs:{placeholder:"请选择用户"}})],1),a("a-form-item",{attrs:{label:"联系方式"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["telephone",{rules:[{required:!0,message:"联系方式不能为空"}]}],expression:"['telephone', {\n              rules: [\n                { required: true, message: '联系方式不能为空' }\n              ]\n            }]"}],attrs:{placeholder:"请输入联系方式"},on:{blur:e.MobileNumberValidator}})],1),a("a-form-item",{attrs:{label:"用户角色"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleId",{rules:[{required:!0,message:"请选择用户角色"}]}],expression:"['roleId', {\n              rules: [{ required: true, message: '请选择用户角色' }]\n            }]"}],attrs:{placeholder:"请选择用户角色"}},e._l(e.templateDatas,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"是否启用"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择"}]}],expression:"[\n              'status', {\n                rules: [{ required: true, message: '请选择' }]\n              }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1),a("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),a("a-button",{attrs:{type:"primary","html-type":"submit",disabled:e.saveDisabled},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1),a("div",[a("a-drawer",{attrs:{width:600,title:e.readTitle,visible:e.visibleRead,confirmLoading:e.readLoading,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onReadClose}},[a("a-card",{attrs:{bordered:!0,title:"基本信息",size:"small"}},[a("detail-list",{attrs:{col:2}},[a("detail-list-item",{attrs:{term:"用户ID"}},[e._v(e._s(e.obj.id))]),a("detail-list-item",{attrs:{term:"用户名称"}},[e._v(e._s(e.obj.name))])],1),a("detail-list",{attrs:{col:1}},[a("detail-list-item",{attrs:{term:"联系方式"}},[e._v(e._s(e.obj.telephone))])],1),a("detail-list",{attrs:{col:2}},[a("detail-list-item",{attrs:{term:"登录账号"}},[e._v(e._s(e.obj.username))]),a("detail-list-item",{attrs:{term:"登录密码"}},[e._v(e._s(e.obj.password))])],1),a("detail-list",{attrs:{col:2}},[a("detail-list-item",{attrs:{term:"用户角色"}},[e._v(e._s(e.obj.roleName))]),a("detail-list-item",{attrs:{term:"状态"}},[e._v(e._s(1===e.obj.status?"启用":"禁用"))])],1)],1)],1)],1)])},n=[],i=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("5530")),s=a("de15"),o=a("2af9"),l=a("b775"),c={userPage:"/system/user/findPage",saveUser:"/system/user/save",userInfo:"/system/user/get",removeUser:"/system/user/remove"};function d(e){return Object(l["b"])({url:c.userPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(l["b"])({url:c.saveUser,method:"post",data:e})}function m(e){return Object(l["b"])({url:c.userInfo,method:"post",data:e})}function f(e){return Object(l["b"])({url:c.removeUser,method:"post",data:e})}var p=a("0fea"),h=a("88bc"),v=a.n(h),b=a("322e"),g=a("5880"),y=s["a"].Item,w={name:"UserList",components:{AFormItem:b["a"],DetailList:s["a"],DetailListItem:y,STable:o["g"]},data:function(){var e=this;return{saveDisabled:!1,searchForm:this.$form.createForm(this),form:this.$form.createForm(this),title:"",readTitle:"",visible:!1,visibleRead:!1,addLoading:!1,readLoading:!1,loading:!1,queryParam:[],obj:{},actionList:{},templateDatas:[],pagination:{showTotal:function(e,t){return"第".concat(t[0],"-").concat(t[1],"条")+" "+"共 ".concat(e," 条记录")}},columns:[{title:"用户名称",dataIndex:"name",key:"name",align:"center",ellipsis:!0,width:"10%"},{title:"登录账号",dataIndex:"username",key:"username",align:"center",ellipsis:!0,width:"20%"},{title:"用户角色",dataIndex:"roleName",key:"roleName",align:"center",ellipsis:!0,width:"20%"},{title:"状态",dataIndex:"statusName",key:"statusName",align:"center",ellipsis:!0,width:"10%"},{title:"创建时间",dataIndex:"createTime",key:"createTime",align:"center",ellipsis:!0,width:"20%"},{title:"操作",scopedSlots:{customRender:"operation"},key:"operation",align:"center"}],loadData:function(t){return Object.assign(t,e.queryParam),d(t).then((function(e){if(1===e.code)return e.result}))}}},created:function(){var e=this;this.fetchTemplateData();var t=this.$route.path.split("/").pop(),a=this.roles.permissions.filter((function(e){return e.permissionId===t}));a=a[0].actionList,a.forEach((function(t){"add"===t?e.actionList.add=1:"get"===t?e.actionList.get=1:"update"===t?e.actionList.update=1:"delete"===t&&(e.actionList.delete=1)}))},computed:Object(i["a"])({},Object(g["mapState"])({roles:function(e){return e.user.roles}})),methods:{MobileNumberValidator:function(e){var t=/^1(3|4|5|6|7|8|9)\d{9}$/;if(e.target.value&&!t.test(e.target.value)){var a=[{message:"请输入正确的手机号码格式",field:"telephone"}];this.form.setFields({telephone:{value:e.target.value,errors:a}})}},addDrawerShow:function(){this.title="添加用户",this.visible=!0},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){if(!e){var r={entity:{name:a.name,roleId:a.roleId}};Object.assign(t.queryParam,r),t.$refs.table.refresh(!0)}}))},handleReset:function(e){this.searchForm.resetFields()},handleEdit:function(e){var t=this;this.title="修改用户信息",this.visible=!0;var a={id:e.id};m(a).then((function(e){t.obj=e.result,0===e.result.userType&&(t.presonInputDisabled=!1),t.form.setFieldsValue(v()(e.result,"id","username","name","password","roleId","telephone","status"))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.saveDisabled=!0,this.confirmLoading=!0,this.form.validateFields((function(e,a){e?(t.saveDisabled=!1,t.form.option.focus=!0,t.confirmLoading=!1,t.form.resetFields()):u(a).then((function(e){1===e.code?(t.$message.success("保存成功"),t.form.resetFields(),t.$refs.table.refresh(!0),t.visible=!1,t.saveDisabled=!1):(t.$message.error("保存失败："+e.message),t.saveDisabled=!1)}))}))},onClose:function(e){this.visible=!1,this.presonInputDisabled=!0,this.form.resetFields()},handleRead:function(e){var t=this;this.readTitle="查看用户信息",this.visibleRead=!0;var a={id:e.id};m(a).then((function(e){t.obj=e.result}))},onReadClose:function(){this.visibleRead=!1},confirm:function(e){var t=this,a={roleId:e.roleId,id:e.id};f(a).then((function(e){1===e.code?t.$success({title:"提示信息",content:"删除成功",onOk:function(){return t.$refs.table.refresh(!0)}}):t.$error({title:"提示信息",content:"删除失败"+e.message})}))},cancel:function(e){this.$message.info("已取消删除")},fetchTemplateData:function(){var e=this,t={};Object(p["c"])(t).then((function(t){if(1===t.code){var a=t.result;a.forEach((function(t){e.templateDatas.push(t)}))}}))}}},j=w,_=a("2877"),x=Object(_["a"])(j,r,n,!1,null,"5fa1dfb4",null);t["default"]=x.exports},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",o="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function f(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var p=Object.prototype,h=p.hasOwnProperty,v=p.toString,b=d.Symbol,g=p.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function j(e,t,a,r,n){var i=-1,s=e.length;a||(a=D),n||(n=[]);while(++i<s){var o=e[i];t>0&&a(o)?t>1?j(o,t-1,a,r,n):f(n,o):r||(n[n.length]=o)}return n}function _(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var r=-1,n=t.length,i={};while(++r<n){var s=t[r],o=e[s];a(o,s)&&(i[s]=o)}return i}function L(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=w(a.length-t,0),i=Array(n);while(++r<n)i[r]=a[t+r];r=-1;var s=Array(t+1);while(++r<t)s[r]=a[r];return s[t]=i,u(e,this,s)}}function D(e){return k(e)||O(e)||!!(y&&e&&e[y])}function I(e){if("string"==typeof e||C(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function O(e){return S(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==n)}var k=Array.isArray;function F(e){return null!=e&&N(e.length)&&!T(e)}function S(e){return q(e)&&F(e)}function T(e){var t=R(e)?v.call(e):"";return t==i||t==s}function N(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return!!e&&"object"==typeof e}function C(e){return"symbol"==typeof e||q(e)&&v.call(e)==o}var P=L((function(e,t){return null==e?{}:_(e,m(j(t,1),I))}));e.exports=P}).call(this,a("c8ba"))}}]);