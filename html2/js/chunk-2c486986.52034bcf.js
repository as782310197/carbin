(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c486986"],{"104e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",{staticClass:"search_div"},[a("a-form",{attrs:{form:e.searchForm,"label-col":{span:8},"wrapper-col":{span:16}},on:{submit:e.handleSearchSubmit}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"设备主姓名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["carOwner"],expression:"['carOwner']"}],attrs:{placeholder:"请输入设备主姓名"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"开始时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime"],expression:"['startTime']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择开始时间"},on:{change:e.startTimeChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"结束时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"['endTime']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择结束时间"},on:{change:e.endTimeChange}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"订单状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],attrs:{placeholder:"请选择"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("待企业支付")]),a("a-select-option",{attrs:{value:"1"}},[e._v("已打款")])],1)],1)],1),a("a-col",{style:{textAlign:"center"},attrs:{span:4}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 查询 ")]),a("a-button",{style:{marginLeft:"2px"},on:{click:e.handleSearchReset}},[e._v(" 清空 ")])],1)],1)],1)],1),a("div",{staticClass:"button_div"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleImport}},[e._v("导入工程租金结算")])],1),a("div",{staticClass:"table_div"},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,pagination:e.pagination,rowKey:function(e){return e.id},scroll:{x:"calc(1200px + 90%)"}},scopedSlots:e._u([{key:"operation",fn:function(t,i){return[1===e.actionList.delete&&0===i.status?a("a",{on:{click:function(t){return e.handleStopOrder(i)}}},[e._v(" 终止订单 ")]):e._e(),1===e.actionList.delete&&0===i.status?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.actionList.get?a("a",{on:{click:function(t){return e.handleRead(i)}}},[e._v(" 查看 ")]):e._e()]}}])})],1),a("div",{staticClass:"check_div"},[a("a-drawer",{attrs:{width:1e3,title:"查看设备订单信息",visible:e.readDrawerVisible,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onReadDrawerClose}},[a("a-descriptions",{attrs:{size:"small",bordered:"",title:"订单信息",column:4}},[a("a-descriptions-item",{attrs:{label:"租赁公司名称",span:4}},[e._v(" "+e._s(e.readListData.enterpriseName)+" ")]),a("a-descriptions-item",{attrs:{label:"车主",span:2}},[e._v(" "+e._s(e.readListData.deviceOwner)+" ")]),a("a-descriptions-item",{attrs:{label:"联系电话",span:2}},[e._v(" "+e._s(e.readListData.phone)+" ")]),a("a-descriptions-item",{attrs:{label:"设备类型",span:2}},[e._v(" "+e._s(e.readListData.deviceType)+" ")]),a("a-descriptions-item",{attrs:{label:"设备型号",span:2}},[e._v(" "+e._s(e.readListData.model)+" ")]),a("a-descriptions-item",{attrs:{label:"机械品牌",span:2}},[e._v(" "+e._s(e.readListData.brand)+" ")]),a("a-descriptions-item",{attrs:{label:"账单周期",span:2}},[e._v(" "+e._s(e.readListData.startDate)+" ")]),a("a-descriptions-item",{attrs:{label:"账单租金",span:2}},[e._v(" "+e._s(e.readListData.rent)+" ")]),a("a-descriptions-item",{attrs:{label:"发放租金",span:2}},[e._v(" "+e._s(e.readListData.payRent)+" ")]),a("a-descriptions-item",{attrs:{label:"企业金额",span:2}},[e._v(" "+e._s(e.readListData.amount)+" ")]),a("a-descriptions-item",{attrs:{label:"企业手续费",span:2}},[e._v(" "+e._s(e.readListData.charge)+" ")]),a("a-descriptions-item",{attrs:{label:"发票手续费",span:2}},[e._v(" "+e._s(e.readListData.taxCharge)+" ")]),a("a-descriptions-item",{attrs:{label:"订单状态",span:2}},[e._v(" "+e._s(e.readListData.statusName)+" ")]),a("a-descriptions-item",{attrs:{label:"创建时间",span:2}},[e._v(" "+e._s(e.readListData.taxCharge)+" ")])],1)],1)],1),a("div",{staticClass:"add_div"},[a("a-drawer",{attrs:{width:800,title:"结算",visible:e.importDrawerVisible,bodyStyle:{paddingBottom:"80px",width:"600px",margin:"0 auto"}},on:{close:e.onClose}},[a("a-descriptions",{attrs:{title:"导入工程租金结算"}},[a("a-descriptions-item",{attrs:{label:"操作说明",span:"3"}},[e._v(" 1、上传文件需要与下载模板文件模板列一致。 "),a("br"),e._v(" 2、若系统检查到异常情况,将会直接回滚本次所有操作,需要下载检查所在行,再进行上传。 "),a("br"),e._v(" 3、上传完成需要前往"),a("strong",[e._v("核算管理--\x3e设备账单--\x3e手动生成账单--\x3e打款支付。")])]),a("a-descriptions-item",{attrs:{label:"租金结算表",span:"3"}},[a("a",{attrs:{href:"http://boss.wangshuibao.com/api/uploadFiles/img_2020_11_20102118803.xlsx"}},[a("a-button",{attrs:{icon:"download",size:"small"}},[e._v("模板下载")])],1)]),a("a-descriptions-item",{attrs:{label:"上传文件",span:"3"}},[a("a-upload",{attrs:{name:"file",multiple:!0,headers:e.headers,fileList:e.downloadFiles,customRequest:e.downloadFilesCustomRequest}},[a("a-button",{attrs:{type:"primary",size:"small"}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传excel ")],1)],1)],1)],1)],1)],1),a("div",{staticClass:"error_div"},[a("a-modal",{attrs:{visible:e.uploadErrorModal,title:"导入失败",footer:null},on:{cancel:e.uploadErrorModalCancel}},[a("div",[e._v(e._s(e.uploadErrorMessage))])])],1)])},r=[],s=(a("99af"),a("4de4"),a("4160"),a("ac1f"),a("1276"),a("159b"),a("5530")),n=a("2af9"),o=a("6714"),l=a("5880"),d={components:{STable:n["g"]},data:function(){var e=this;return{sucdate:"123",searchForm:this.$form.createForm(this),form:this.$form.createForm(this),readDrawerVisible:!1,importDrawerVisible:!1,readListData:[],actionList:{},pagination:{showTotal:function(e,t){return"第".concat(t[0],"-").concat(t[1],"条")+" "+"共 ".concat(e," 条记录")}},queryParam:{},columns:[{title:"租赁公司名称",dataIndex:"enterpriseName",key:"enterpriseName",align:"center",ellipsis:!0,width:"20%"},{title:"设备类型",dataIndex:"deviceType",key:"deviceType",align:"center",ellipsis:!0,width:"20%"},{title:"设备型号",dataIndex:"model",key:"model",align:"center",ellipsis:!0,width:"20%"},{title:"机械品牌",dataIndex:"brand",key:"brand",align:"center",ellipsis:!0,width:"20%"},{title:"设备主姓名",dataIndex:"deviceOwner",key:"deviceOwner",align:"center",ellipsis:!0,width:"20%"},{title:"联系电话",dataIndex:"phone",key:"phone",align:"center",ellipsis:!0,width:"20%"},{title:"账单周期",dataIndex:"billCycle",key:"billCycle",align:"center",ellipsis:!0,width:"20%"},{title:"账单租金",dataIndex:"rent",key:"rent",align:"center",ellipsis:!0,width:"20%"},{title:"发放租金",dataIndex:"payRent",key:"payRent",align:"center",ellipsis:!0,width:"20%"},{title:"企业金额",dataIndex:"amount",key:"amount",align:"center",ellipsis:!0,width:"20%"},{title:"企业手续费",dataIndex:"charge",key:"charge",align:"center",ellipsis:!0,width:"20%"},{title:"发票手续费",dataIndex:"taxCharge",key:"taxCharge",align:"center",ellipsis:!0,width:"20%"},{title:"订单状态",dataIndex:"statusName",key:"statusName",align:"center",ellipsis:!0,width:"20%"},{title:"创建时间",dataIndex:"createTime",key:"createTime",align:"center",ellipsis:!0,width:"20%"},{title:"操作",scopedSlots:{customRender:"operation"},key:"operation",fixed:"right",align:"center",width:"150px"}],loadData:function(t){return Object.assign(t,e.queryParam),Object(o["b"])(t).then((function(e){return e.result}))},headers:{authorization:"authorization-text"},downloadFiles:[],uploadErrorModal:!1,uploadErrorMessage:"",startTime:"",endTime:""}},created:function(){var e=this,t=this.$route.path.split("/").pop(),a=this.roles.permissions.filter((function(e){return e.permissionId===t}));a=a[0].actionList,a.forEach((function(t){"add"===t?e.actionList.add=1:"get"===t?e.actionList.get=1:"update"===t?e.actionList.update=1:"delete"===t&&(e.actionList.delete=1)}))},computed:Object(s["a"])({},Object(l["mapState"])({roles:function(e){return e.user.roles}})),methods:{startTimeChange:function(e,t){this.startTime=t},endTimeChange:function(e,t){this.endTime=t},handleSearchSubmit:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){if(!e){alert(a.carOwner);var i={entity:{carOwner:a.carOwner,status:a.status,startTime:t.startTime,endTime:t.endTime}};Object.assign(t.queryParam,i),t.$refs.table.refresh(!0)}}))},handleSearchReset:function(){this.searchForm.resetFields(),this.startTime="",this.endTime=""},handleStopOrder:function(e){var t=this;this.$confirm({title:"确定终止订单?",content:"",onOk:function(){Object(o["c"])({id:e.id}).then((function(e){1===e.code?(t.$message.success("已终止订单"),t.$refs.table.refresh(!0)):t.$message.error(e.message)}))},onCancel:function(){t.$message.info("取消终止订单")}})},handleRead:function(e){this.readListData=e,this.readDrawerVisible=!0},onReadDrawerClose:function(){this.readDrawerVisible=!1,this.form.resetFields()},handleImport:function(){this.importDrawerVisible=!0},onClose:function(){this.importDrawerVisible=!1},oncks:function(e){alert(e)},downloadFilesCustomRequest:function(e){var t=this,a=new FormData;a.append("file",e.file),Object(o["d"])(a).then((function(e){0===e.code?(alert(e.message),t.importDrawerVisible=!1,t.$refs.table.refresh(!0)):alert(e.message)}))},uploadErrorModalCancel:function(){this.uploadErrorModal=!1}}},c=d,p=a("2877"),u=Object(p["a"])(c,i,r,!1,null,"78c7390a",null);t["default"]=u.exports},6714:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l}));var i=a("b775"),r={findBizOrderPage:"/biz/bizOrder/findBizOrderPage",saveBizOrder:"/biz/bizOrder/save",terminatesBizOrder:"/biz/bizOrder/terminates",findDeviceOrderPage:"/biz/bizOrder/findDeviceOrderPage",uploadDeviceOrderExcel:"/biz/bizOrder/uploadDeviceOrderExcel"};function s(e){return Object(i["b"])({url:r.findBizOrderPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function n(e){return Object(i["b"])({url:r.terminatesBizOrder,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["b"])({url:r.findDeviceOrderPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["b"])({url:r.uploadDeviceOrderExcel,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);