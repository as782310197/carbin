(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57346b2a"],{"70a1":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",[i("div",{staticClass:"search_div"},[i("a-form",{attrs:{form:e.searchForm,"label-col":{span:4},"wrapper-col":{span:16}},on:{submit:e.handleSearchSubmit}},[i("a-row",[i("a-col",{attrs:{span:9}},[i("a-form-item",{attrs:{label:"开始时间"}},[i("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate"],expression:"['startDate']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择开始时间"},on:{change:e.startDateChange}})],1)],1),i("a-col",{attrs:{span:9}},[i("a-form-item",{attrs:{label:"结束时间"}},[i("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endDate"],expression:"['endDate']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择结束时间"},on:{change:e.endDateChange}})],1)],1),i("a-col",{style:{textAlign:"center"},attrs:{span:6}},[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 查询 ")]),i("a-button",{style:{marginLeft:"2px"},on:{click:e.handleSearchReset}},[e._v(" 清空 ")])],1)],1)],1)],1),i("div",[i("div",{staticClass:"button_div"},[1===e.actionList.add?i("a-button",{attrs:{type:"primary"},on:{click:e.openInvoice}},[e._v("开具")]):e._e()],1),i("a-modal",{attrs:{title:"选择开票类型",visible:e.visibleInvoice,width:"30%"},on:{ok:e.handleOkInvoice,cancel:e.handleCancelInvoice}},[i("a-radio-group",{attrs:{"default-value":1},on:{change:e.handleChangeInvoice}},[i("a-radio",{attrs:{value:1}},[e._v("增值税专用发票")]),i("a-radio",{attrs:{value:0}},[e._v("增值税普通发票")])],1),i("a-tree-select",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{allowClear:!0,"tree-data":e.invoiceItemTreeData,placeholder:"请选择发票品目"},on:{change:e.selectInvoiceItemChange},model:{value:e.invoiceItemTreeValue,callback:function(t){e.invoiceItemTreeValue=t},expression:"invoiceItemTreeValue"}})],1)],1),i("div",{staticClass:"table_div"},[e.invoiceReload?i("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,pagination:e.pagination,rowKey:function(e){return e.id},"row-selection":e.rowSelection},scopedSlots:e._u([{key:"operation",fn:function(t,a){return[1===e.actionList.get?i("a",{on:{click:function(t){return e.handleRead(a)}}},[e._v(" 查看 ")]):e._e()]}}],null,!1,3050806215)}):e._e()],1),i("div",{staticClass:"check_div"},[i("a-drawer",{attrs:{width:650,title:"查看申请开票信息",visible:e.readDrawerVisible,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onReadDrawerClose}},[i("a-descriptions",{attrs:{size:"small",bordered:"",column:4}},[i("a-descriptions-item",{attrs:{label:"账单名称",span:4}},[e._v(" "+e._s(e.readListData.billName)+" ")]),i("a-descriptions-item",{attrs:{label:"账单金额",span:2}},[e._v(" "+e._s(e.readListData.rent)+" ")]),i("a-descriptions-item",{attrs:{label:"账单周期",span:2}},[e._v(" "+e._s(e.readListData.billCycle)+" ")]),i("a-descriptions-item",{attrs:{label:"需支付金额",span:2}},[e._v(" "+e._s(e.readListData.amount)+" ")]),i("a-descriptions-item",{attrs:{label:"支付状态",span:2}},[e._v(" "+e._s(e.readListData.statusName)+" ")])],1)],1)],1)])},n=[],o=(i("99af"),i("4de4"),i("4160"),i("d81d"),i("a434"),i("ac1f"),i("1276"),i("159b"),i("5530")),r=i("2af9"),l=i("8eda"),s=i("5880"),c={components:{STable:r["g"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),form:this.$form.createForm(this),addDrawerTitle:"",addDrawerVisible:!1,saveDisabled:!1,saveDivVisible:!0,readDrawerVisible:!1,readListData:[],actionList:{},pagination:{showTotal:function(e,t){return"第".concat(t[0],"-").concat(t[1],"条")+" "+"共 ".concat(e," 条记录")}},visibleInvoice:!1,invoiceReload:!0,invoiceIds:[],invoiceType:0,rowSelection:{onChange:function(t,i){e.invoiceIds=i.map((function(e){return e.id}))}},columns:[{title:"账单名称",dataIndex:"billName",key:"billName",align:"center",ellipsis:!0,width:"20%"},{title:"账单金额",dataIndex:"rent",key:"rent",align:"center",ellipsis:!0,width:"20%"},{title:"账单周期",dataIndex:"billCycle",key:"billCycle",align:"center",ellipsis:!0},{title:"需支付金额",dataIndex:"amount",key:"amount",align:"center",ellipsis:!0},{title:"支付状态",dataIndex:"statusName",key:"statusName",align:"center",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",align:"center",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"operation"},key:"operation",align:"center",width:"20%"}],queryParam:{entity:{applyInvoiceStatus:0,status:1}},loadData:function(t){return Object.assign(t,e.queryParam),Object(l["d"])(t).then((function(e){return e.result}))},invoiceItemTreeValue:void 0,invoiceItemTreeData:[],startDate:"",endDate:"",startTime:"",endTime:""}},created:function(){var e=this,t=this.$route.path.split("/").pop(),i=this.roles.permissions.filter((function(e){return e.permissionId===t}));i=i[0].actionList,i.forEach((function(t){"add"===t?e.actionList.add=1:"get"===t?e.actionList.get=1:"update"===t?e.actionList.update=1:"delete"===t&&(e.actionList.delete=1)})),this.getTaxTree()},computed:Object(o["a"])({},Object(s["mapState"])({roles:function(e){return e.user.roles}})),methods:{getTaxTree:function(){var e=this,t={};Object(l["h"])(t).then((function(t){1===t.code?e.invoiceItemTreeData=t.result:e.$message.error(t.message)}))},selectInvoiceItemChange:function(e){},handleChangeInvoice:function(e){this.invoiceType=e.target.value},handleOkInvoice:function(){var e=this;this.invoiceItemTreeValue?(this.invoiceReload=!1,Object(l["a"])({billids:JSON.parse(JSON.stringify(this.invoiceIds)),invoiceType:this.invoiceType,invoiceCode:this.invoiceItemTreeValue}).then((function(t){e.visibleInvoice=!1,e.invoiceReload=!0,e.invoiceItemTreeValue=void 0,1===t.code?e.visibleInvoice=!1:e.$message.error(t.message)}))):this.$message.error("发票品目不能为空")},handleCancelInvoice:function(){this.visibleInvoice=!1,this.invoiceItemTreeValue=void 0},openInvoice:function(){this.invoiceIds.length>0?this.visibleInvoice=!0:this.$message.error("请先选择数据")},startDateChange:function(e,t){this.startDate=t},startTimeChange:function(e,t){this.startTime=t},endDateChange:function(e,t){this.endDate=t},endTimeChange:function(e,t){this.endTime=t},handleSearchSubmit:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,i){if(!e){var a={entity:{applyInvoiceStatus:0,status:1,startDate:t.startDate,endDate:t.endDate}};Object.assign(t.queryParam,a),t.$refs.table.refresh(!0)}}))},handleSearchReset:function(){this.searchForm.resetFields(),this.startDate="",this.endDate=""},handleIssue:function(){this.$confirm({title:"确定要申请开票吗？",content:"",onOk:function(){},onCancel:function(){}})},handleRead:function(e){this.readListData=e,this.readDrawerVisible=!0},handleDelete:function(e){var t=this.loadData.key;this.loadData.splice(t,1),this.$message.success("删除成功")},handleCancelDeletion:function(){this.$message.info("已取消删除")},onReadDrawerClose:function(){this.readDrawerVisible=!1,this.form.resetFields()}}},d=c,u=i("2877"),h=Object(u["a"])(d,a,n,!1,null,"39cb110f",null);t["default"]=h.exports},"8eda":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"j",(function(){return l})),i.d(t,"k",(function(){return s})),i.d(t,"l",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"e",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"f",(function(){return v})),i.d(t,"m",(function(){return b})),i.d(t,"g",(function(){return m})),i.d(t,"h",(function(){return f}));var a=i("b775"),n={createBizBillManully:"/biz/bizBill/createBizBillManully",importBizBillvoucherImage:"/biz/bizBill/importBizBillvoucherImage",findBizBillPage:"/biz/bizBill/findBizBillPage",findBillPage:"/biz/bizBill/findBillPage",getBizOrder:"/biz/bizBill/get",removebizBill:"/biz/bizBill/remove",savebizBill:"/biz/bizBill/save",applyBizBillInvoice:"/biz/bizBillInvoice/applyBizBillInvoice",cancleBizBillInvoice:"/biz/bizBillInvoice/cancleBizBillInvoice",findBizBillInvoicePage:"/biz/bizBillInvoice/findBizBillInvoicePage",findBizBillInvoice:"/biz/bizBillInvoice/get",madeOutBizBillInovice:"/biz/bizBillInvoice/madeOutBizBillInovice",passBizBillInovice:"/biz/bizBillInvoice/passBizBillInovice",rejectBizBillInovice:"/biz/bizBillInvoice/rejectBizBillInovice",findDeviceBillPage:"/biz/bizBill/findDeviceBillPage",getTaxCategoryTree:"/system/taxCategory/getTaxCategoryTree"};function o(e){return Object(a["b"])({url:n.cancleBizBillInvoice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a["b"])({url:n.findBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a["b"])({url:n.madeOutBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a["b"])({url:n.passBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["b"])({url:n.rejectBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["b"])({url:n.applyBizBillInvoice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(a["b"])({url:n.findBizBillInvoicePage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(a["b"])({url:n.createBizBillManully,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(a["b"])({url:n.importBizBillvoucherImage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(a["b"])({url:n.findBizBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(a["b"])({url:n.removebizBill,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(a["b"])({url:n.findDeviceBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(a["b"])({url:n.getTaxCategoryTree,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);