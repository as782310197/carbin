(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f172caa"],{6735:function(e,t,a){"use strict";var i=a("e6c7"),n=a.n(i);n.a},"8eda":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"j",(function(){return o})),a.d(t,"k",(function(){return l})),a.d(t,"l",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"f",(function(){return h})),a.d(t,"m",(function(){return f})),a.d(t,"g",(function(){return b})),a.d(t,"h",(function(){return v}));var i=a("b775"),n={createBizBillManully:"/biz/bizBill/createBizBillManully",importBizBillvoucherImage:"/biz/bizBill/importBizBillvoucherImage",findBizBillPage:"/biz/bizBill/findBizBillPage",findBillPage:"/biz/bizBill/findBillPage",getBizOrder:"/biz/bizBill/get",removebizBill:"/biz/bizBill/remove",savebizBill:"/biz/bizBill/save",applyBizBillInvoice:"/biz/bizBillInvoice/applyBizBillInvoice",cancleBizBillInvoice:"/biz/bizBillInvoice/cancleBizBillInvoice",findBizBillInvoicePage:"/biz/bizBillInvoice/findBizBillInvoicePage",findBizBillInvoice:"/biz/bizBillInvoice/get",madeOutBizBillInovice:"/biz/bizBillInvoice/madeOutBizBillInovice",passBizBillInovice:"/biz/bizBillInvoice/passBizBillInovice",rejectBizBillInovice:"/biz/bizBillInvoice/rejectBizBillInovice",findDeviceBillPage:"/biz/bizBill/findDeviceBillPage",getTaxCategoryTree:"/system/taxCategory/getTaxCategoryTree"};function s(e){return Object(i["b"])({url:n.cancleBizBillInvoice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["b"])({url:n.findBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["b"])({url:n.madeOutBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["b"])({url:n.passBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["b"])({url:n.rejectBizBillInovice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["b"])({url:n.applyBizBillInvoice,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(i["b"])({url:n.findBizBillInvoicePage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(i["b"])({url:n.createBizBillManully,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(i["b"])({url:n.importBizBillvoucherImage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(i["b"])({url:n.findBizBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(i["b"])({url:n.removebizBill,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(i["b"])({url:n.findDeviceBillPage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(i["b"])({url:n.getTaxCategoryTree,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},c39e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",{staticClass:"search_div"},[a("a-form",{attrs:{form:e.searchForm,"label-col":{span:6},"wrapper-col":{span:16}},on:{submit:e.handleSearchSubmit}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"发票抬头"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["enterpriseName"],expression:"['enterpriseName']"}],attrs:{placeholder:"请输入发票抬头"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"开始时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime"],expression:"['startTime']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择开始时间"},on:{change:e.startTimeChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"结束时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"['endTime']"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择结束时间"},on:{change:e.endTimeChange}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"发票状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],attrs:{placeholder:"请选择发票状态"}},e._l(e.statusList,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])})),1)],1)],1),a("a-col",{style:{textAlign:"center"},attrs:{span:4}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 查询 ")]),a("a-button",{style:{marginLeft:"2px"},on:{click:e.handleSearchReset}},[e._v(" 清空 ")])],1)],1)],1)],1),a("div",{staticClass:"button_div"},[a("router-link",{staticClass:"link",attrs:{to:{name:"invoiceApplicationList"}}},[1===e.actionList.add?a("a-button",{attrs:{type:"primary"}},[e._v("申请发票")]):e._e()],1)],1),a("div",{staticClass:"table_div"},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,pagination:e.pagination,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"operation",fn:function(t,i){return[1===e.actionList.delete&&0===i.status?a("a",{on:{click:function(t){return e.cancleIssue(i)}}},[e._v(" 发票取消 ")]):e._e(),1!==e.actionList.get&&1!==e.actionList.delete||0!==i.status?e._e():a("a-divider",{attrs:{type:"vertical"}}),1===e.actionList.get?a("a",{on:{click:function(t){return e.handleRead(i)}}},[e._v(" 查看 ")]):e._e(),(1===e.actionList.update&&1===e.actionList.get||1!==e.actionList.get)&&2===i.status?a("a-divider",{attrs:{type:"vertical"}}):e._e(),2===i.status?a("a",{on:{click:function(t){return e.handleIssue(i)}}},[e._v(" 开具发票 ")]):e._e(),(1===e.actionList.update&&1===e.actionList.get||1!==e.actionList.get)&&0===i.status?a("a-divider",{attrs:{type:"vertical"}}):e._e(),0===i.status?a("a-dropdown",[1===e.actionList.update?a("a",{staticClass:"ant-dropdown-link"},[e._v(" 审核 "),a("a-icon",{attrs:{type:"down"}})],1):e._e(),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[0===i.status?a("a-menu-item",[a("a",{on:{click:function(t){return e.handleApproved(i)}}},[e._v("申请通过")])]):e._e(),0===i.status?a("a-menu-item",[a("a",{on:{click:function(t){return e.handleUnApproved(i)}}},[e._v("驳回申请")])]):e._e()],1)],1):e._e()]}}])})],1),a("div",{staticClass:"check_div"},[a("a-drawer",{attrs:{width:650,title:"查看发票信息",visible:e.readDrawerVisible,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onReadDrawerClose}},[a("a-descriptions",{attrs:{title:"基本信息",size:"small",bordered:""}},[a("a-descriptions-item",{attrs:{label:"发票抬头",span:3}},[e._v(" "+e._s(e.readListData.enterpriseName)+" ")]),a("a-descriptions-item",{attrs:{label:"税号",span:3}},[e._v(" "+e._s(e.readListData.license)+" ")]),a("a-descriptions-item",{attrs:{label:"发票金额",span:3}},[e._v(" "+e._s(e.readListData.amount)+" ")]),a("a-descriptions-item",{attrs:{label:"账单周期",span:3}},[e._v(" "+e._s(e.readListData.billCycle)+" ")]),a("a-descriptions-item",{attrs:{label:"发票类型",span:3}},[e._v(" "+e._s(e.readListData.invoiceTypeName)+" ")]),a("a-descriptions-item",{attrs:{label:"状态",span:3}},[e._v(" "+e._s(e.readListData.statusName)+" ")]),a("a-descriptions-item",{attrs:{label:"开户银行名称",span:3}},[e._v(" "+e._s(e.readListData.accountHolder)+" ")]),a("a-descriptions-item",{attrs:{label:"基本开户账号",span:3}},[e._v(" "+e._s(e.readListData.account)+" ")]),a("a-descriptions-item",{attrs:{label:"注册场所地址",span:3}},[e._v(" "+e._s(e.readListData.address)+" ")]),a("a-descriptions-item",{attrs:{label:"注册固定电话",span:3}},[e._v(" "+e._s(e.readListData.telphone)+" ")])],1),a("a-descriptions",{attrs:{title:"收货地址",size:"small",bordered:""}},[a("a-descriptions-item",{attrs:{label:"姓名",span:3}},[e._v(" "+e._s(e.readListData.receiverName)+" ")]),a("a-descriptions-item",{attrs:{label:"联系电话",span:3}},[e._v(" "+e._s(e.readListData.receiverPhone)+" ")]),a("a-descriptions-item",{attrs:{label:"所在城市",span:3}},[e._v(" "+e._s(e.readListData.receiverCity)+" ")]),a("a-descriptions-item",{attrs:{label:"详细地址",span:3}},[e._v(" "+e._s(e.readListData.receiverAddress)+" ")]),a("a-descriptions-item",{attrs:{label:"备注",span:3}},[e._v(" "+e._s(e.readListData.memo)+" ")])],1)],1)],1)])},n=[],s=(a("99af"),a("4de4"),a("4160"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("5530")),r=a("2af9"),o=a("8eda"),l=a("5880"),c={components:{STable:r["g"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),form:this.$form.createForm(this),infoForm:this.$form.createForm(this),addressForm:this.$form.createForm(this),addDrawerTitle:"",addDrawerVisible:!1,saveDisabled:!1,saveDivVisible:!0,readDrawerVisible:!1,infoModalVisable:!1,addressModalVisable:!1,readListData:[],actionList:{},statusList:[{key:"0",value:"待审核"},{key:"2",value:"审核通过"},{key:"1",value:"审核驳回"},{key:"3",value:"已开具"},{key:"4",value:"已取消"}],pagination:{showTotal:function(e,t){return"第".concat(t[0],"-").concat(t[1],"条")+" "+"共 ".concat(e," 条记录")}},queryParam:{},columns:[{title:"发票抬头",dataIndex:"enterpriseName",key:"enterpriseName",align:"center",ellipsis:!0,width:"20%"},{title:"税号",dataIndex:"license",key:"license",align:"center",ellipsis:!0},{title:"发票类型",dataIndex:"invoiceTypeName",key:"invoiceTypeName",align:"center",ellipsis:!0},{title:"发票金额",dataIndex:"amount",key:"amount",align:"center",ellipsis:!0},{title:"发票状态",dataIndex:"statusName",key:"statusName",align:"center",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",align:"center",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"operation"},key:"operation",align:"center",width:"20%"}],loadData:function(t){return Object.assign(t,e.queryParam),Object(o["e"])(t).then((function(e){return e.result}))},startTime:"",endTime:""}},created:function(){var e=this,t=this.$route.path.split("/").pop(),a=this.roles.permissions.filter((function(e){return e.permissionId===t}));a=a[0].actionList,a.forEach((function(t){"add"===t?e.actionList.add=1:"get"===t?e.actionList.get=1:"update"===t?e.actionList.update=1:"delete"===t&&(e.actionList.delete=1)}))},computed:Object(s["a"])({},Object(l["mapState"])({roles:function(e){return e.user.roles}})),methods:{cancleIssue:function(e){var t=this;this.$confirm({title:"是否取消发票？",content:"",onOk:function(){Object(o["b"])({id:e.id}).then((function(e){1===e.code?(t.$message.success("发票取消成功"),t.$refs.table.refresh(!0)):t.$message.error(e.message)}))},onCancel:function(){t.$message.info("取消发票")}})},startTimeChange:function(e,t){this.startTime=t},endTimeChange:function(e,t){this.endTime=t},handleSearchSubmit:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){if(!e){var i={entity:{status:a.status,enterpriseName:a.enterpriseName,startTime:t.startTime,endTime:t.endTime}};Object.assign(t.queryParam,i),t.$refs.table.refresh(!0)}}))},handleSearchReset:function(){this.searchForm.resetFields(),this.startTime="",this.endTime=""},handleInfo:function(){this.infoModalVisable=!0},handleAddress:function(){this.addressModalVisable=!0},handleIssue:function(e){var t=this;this.$confirm({title:"是否通过申请？",content:"",onOk:function(){Object(o["j"])({id:e.id}).then((function(e){1===e.code?(t.$message.success("发票申请成功"),t.$refs.table.refresh(!0)):t.$message.error(e.message)}))},onCancel:function(){t.$message.info("取消申请")}})},handleApproved:function(e){var t=this;this.$confirm({title:"是否通过审核？",content:"",onOk:function(){Object(o["k"])({id:e.id}).then((function(e){1===e.code?(t.$message.success("发票审核成功"),t.$refs.table.refresh(!0)):t.$message.error(e.message)}))},onCancel:function(){t.$message.info("取消审核")}})},handleUnApproved:function(e){var t=this;this.$confirm({title:"是否驳回申请？",content:"",onOk:function(){Object(o["l"])({id:e.id}).then((function(e){1===e.code?(t.$message.success("发票驳回成功"),t.$refs.table.refresh(!0)):t.$message.error(e.message)}))},onCancel:function(){t.$message.info("取消驳回")}})},handleRead:function(e){this.readListData=e,this.readDrawerVisible=!0},handleDelete:function(e){var t=this.loadData.key;this.loadData.splice(t,1),this.$message.success("删除成功")},handleCancelDeletion:function(){this.$message.info("已取消删除")},onReadDrawerClose:function(){this.readDrawerVisible=!1,this.form.resetFields()},onTimeChange:function(e,t){}}},d=c,u=(a("6735"),a("2877")),p=Object(u["a"])(d,i,n,!1,null,"13614687",null);t["default"]=p.exports},e6c7:function(e,t,a){}}]);