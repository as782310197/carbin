(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a132f64"],{"816b":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c}));var r=n("b775"),a={modulePage:"/system/module/findModulePage",moduleList:"/system/module/findModuleList",moduleInfo:"/system/module/get",menuInfo:"/system/module/getMenuInfo",saveModule:"/system/module/save",removeModule:"/system/module/remove",menuPage:"/system/module/findMenuPage"};function i(e){return Object(r["b"])({url:a.modulePage,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(r["b"])({url:a.saveModule,method:"post",data:e})}function s(e){return Object(r["b"])({url:a.moduleList,method:"post",data:e})}function l(e){return Object(r["b"])({url:a.menuPage,method:"post",data:e})}function c(e){return Object(r["b"])({url:a.removeModule,method:"post",data:e})}},"88bc":function(e,t,n){(function(t){var n=1/0,r=9007199254740991,a="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function m(e,t){var n=-1,r=e?e.length:0,a=Array(r);while(++n<r)a[n]=t(e[n],n,e);return a}function f(e,t){var n=-1,r=t.length,a=e.length;while(++n<r)e[a+n]=t[n];return e}var p=Object.prototype,b=p.hasOwnProperty,v=p.toString,h=u.Symbol,g=p.propertyIsEnumerable,y=h?h.isConcatSpreadable:void 0,j=Math.max;function w(e,t,n,r,a){var i=-1,o=e.length;n||(n=O),a||(a=[]);while(++i<o){var s=e[i];t>0&&n(s)?t>1?w(s,t-1,n,r,a):f(a,s):r||(a[a.length]=s)}return a}function L(e,t){return e=Object(e),_(e,t,(function(t,n){return n in e}))}function _(e,t,n){var r=-1,a=t.length,i={};while(++r<a){var o=t[r],s=e[o];n(s,o)&&(i[o]=s)}return i}function x(e,t){return t=j(void 0===t?e.length-1:t,0),function(){var n=arguments,r=-1,a=j(n.length-t,0),i=Array(a);while(++r<a)i[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=i,d(e,this,o)}}function O(e){return D(e)||S(e)||!!(y&&e&&e[y])}function k(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function S(e){return C(e)&&b.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==a)}var D=Array.isArray;function I(e){return null!=e&&N(e.length)&&!F(e)}function C(e){return $(e)&&I(e)}function F(e){var t=T(e)?v.call(e):"";return t==i||t==o}function N(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return!!e&&"object"==typeof e}function q(e){return"symbol"==typeof e||$(e)&&v.call(e)==s}var M=x((function(e,t){return null==e?{}:L(e,m(w(t,1),k))}));e.exports=M}).call(this,n("c8ba"))},"950f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"moduleCard"},[n("div",[n("div",{staticClass:"addDiv"},[1===e.actionList.add?n("a-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addDrawerShow}},[n("a-icon",{attrs:{type:"plus"}}),e._v(" 增加 ")],1):e._e()],1)]),n("div",{staticClass:"tableDiv"},[n("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,pagination:e.pagination,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[1===e.actionList.update?n("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v(" 修改 ")]):e._e(),1===e.actionList.update&&1===e.actionList.get||1!==e.actionList.get?n("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.actionList.get?n("a",{on:{click:function(t){return e.handleRead(r)}}},[e._v(" 查看 ")]):e._e(),1===e.actionList.get||1===e.actionList.delete?n("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.actionList.delete?n("a-popconfirm",{attrs:{title:"您确定要删除吗?",okText:"确定",cancelText:"取消"},on:{confirm:function(t){return e.confirm(r)},cancel:e.cancel}},[n("a",{attrs:{href:"#"}},[e._v(" 删除 ")])]):e._e()]}}])})],1),n("div",[n("a-drawer",{attrs:{width:600,title:e.title,visible:e.visible,confirmLoading:e.addLoading,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onClose}},[n("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:16}},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:"hidden"}})],1),n("a-form-item",{attrs:{label:"类别"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"类别不能为空"}]}],expression:"['description', {\n              rules: [{ required: true, message: '类别不能为空' }]\n            }]"}],attrs:{placeholder:"请选择类别"}},[n("a-select-option",{attrs:{value:"大后台"}},[e._v("大后台")]),n("a-select-option",{attrs:{value:"企业后台"}},[e._v("企业后台")])],1)],1),n("a-form-item",{attrs:{label:"模块名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["moduleName",{rules:[{required:!0,message:"模块名称不能为空"}]}],expression:"['moduleName', {\n              rules: [{ required: true, message: '模块名称不能为空' }]\n            }]"}],attrs:{placeholder:"请输入模块名称"}})],1),n("a-form-item",{attrs:{label:"排序码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{required:!0,message:"排序码不能为空"}]}],expression:"['sort', {\n              rules: [{ required: true, message: '排序码不能为空' }]\n            }]"}],attrs:{placeholder:"请输入排序码"}})],1),n("a-form-item",{attrs:{label:"路由地址"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"路由地址不能为空"}]}],expression:"['url', {\n              rules: [{ required: true, message: '路由地址不能为空' }]\n            }]"}],attrs:{placeholder:"请输入路由地址"}})],1)],1),n("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[n("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),n("a-button",{attrs:{type:"primary","html-type":"submit",disabled:e.saveDisabled},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1),n("div",[n("a-drawer",{attrs:{width:500,title:e.readTitle,visible:e.visibleRead,confirmLoading:e.readLoading,bodyStyle:{paddingBottom:"80px"}},on:{close:e.onReadClose}},[n("a-descriptions",{attrs:{size:"small",bordered:""}},[n("a-descriptions-item",{attrs:{label:"类别",span:3}},[e._v(" "+e._s(e.obj.description)+" ")]),n("a-descriptions-item",{attrs:{label:"模块名称",span:3}},[e._v(" "+e._s(e.obj.moduleName)+" ")]),n("a-descriptions-item",{attrs:{label:"排序码",span:3}},[e._v(" "+e._s(e.obj.sort)+" ")]),n("a-descriptions-item",{attrs:{label:"路由地址",span:3}},[e._v(" "+e._s(e.obj.url)+" ")])],1)],1)],1)])},a=[],i=(n("99af"),n("4de4"),n("4160"),n("ac1f"),n("1276"),n("159b"),n("5530")),o=n("de15"),s=n("2af9"),l=n("816b"),c=n("88bc"),u=n.n(c),d=n("322e"),m=n("5880"),f=o["a"].Item,p={name:"ModuleList",components:{DetailList:o["a"],DetailListItem:f,STable:s["g"],AFormItem:d["a"]},data:function(){var e=this;return{saveDisabled:!1,form:this.$form.createForm(this),title:"",readTitle:"",visible:!1,visibleRead:!1,addLoading:!1,readLoading:!1,loading:!1,obj:{},actionList:{},pagination:{showTotal:function(e,t){return"第".concat(t[0],"-").concat(t[1],"条")+" "+"共 ".concat(e," 条记录")}},columns:[{title:"类别",dataIndex:"description",key:"description",align:"center",ellipsis:!0},{title:"模块名称",dataIndex:"moduleName",key:"moduleName",align:"center",ellipsis:!0},{title:"排序码",dataIndex:"sort",key:"sort",align:"center",ellipsis:!0},{title:"路由地址",dataIndex:"url",key:"url",align:"center",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"operation"},key:"operation",align:"center"}],queryParam:{entity:{menu:!1}},loadData:function(t){return Object.assign(t,e.queryParam),Object(l["c"])(t).then((function(e){return e.result}))}}},created:function(){var e=this,t=this.$route.path.split("/").pop(),n=this.roles.permissions.filter((function(e){return e.permissionId===t}));n=n[0].actionList,n.forEach((function(t){"add"===t?e.actionList.add=1:"get"===t?e.actionList.get=1:"update"===t?e.actionList.update=1:"delete"===t&&(e.actionList.delete=1)}))},computed:Object(i["a"])({},Object(m["mapState"])({roles:function(e){return e.user.roles}})),methods:{addDrawerShow:function(){this.title="添加模块",this.visible=!0},handleEdit:function(e){var t=this;this.visible=!0,this.title="修改模块信息",this.$nextTick((function(){t.form.setFieldsValue(u()(e,"id","description","url","moduleName","sort"))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.saveDisabled=!0,this.confirmLoading=!0;var n={menu:!1,grade:1,parentId:0};this.form.validateFields((function(e,r){e?(t.saveDisabled=!1,t.form.option.focus=!0,t.confirmLoading=!1,t.form.resetFields()):(Object.assign(r,n),Object(l["e"])(r).then((function(e){1===e.code?(t.$message.success("保存成功"),t.form.resetFields(),t.$refs.table.refresh(!0),t.visible=!1,t.saveDisabled=!1):(t.$message.error("保存失败："+e.message),t.saveDisabled=!1)})))}))},onClose:function(e){this.visible=!1,this.form.resetFields()},handleRead:function(e){this.obj=e,this.readTitle="查看角色信息",this.visibleRead=!0},onReadClose:function(){this.visibleRead=!1},confirm:function(e){var t=this,n={id:e.id};Object(l["d"])(n).then((function(e){1===e.code?t.$success({title:"提示信息",content:"删除成功",onOk:function(){return t.$refs.table.refresh(!0)}}):t.$error({title:"提示信息",content:"删除失败"+e.message})}))},cancel:function(e){this.$message.info("已取消删除")}}},b=p,v=n("2877"),h=Object(v["a"])(b,r,a,!1,null,"5eed5274",null);t["default"]=h.exports}}]);